# CleanCode

## 《代码整洁之道》读书笔记

书中提到一种观点：代码质量与其整洁度成正比。干净的代码，既在质量上较为可靠，也为后期维护，升级奠定良好的基础。



“我们就是一群代码猴子，上蹿下跳，自以为领略了编程的真谛。可惜当我们抓着几个酸桃子，得意洋洋坐到树枝上，却对自己造成的混乱熟视无睹。那堆“可以运行”的乱麻程序，就在我们的眼皮底下慢慢腐坏。”



​												——《代码整洁之道》作者 RobertC.Martin，于SD West 2007技术大会


## 前言

里面有一句话，阅读本书呀多用心思，这可不是那种降落前就能读完的“感觉不错”的飞机书，本书要让你用过，而且要非常用功。 那么如何用功呢？ 

就是要阅读代码，阅读大量的艾玛，而且你要琢磨某一段代码好在什么地方，坏在什么地方，让我们分解，而后组合模块的时候，得亦步亦趋的更上，这里带下功夫。



其实意思就是说，这书要慢慢品，同时要结合具体的工作，多阅读别人的代码，多总结思考。

## 第一章 整洁代码

阅读本书有两个原因：第一，你是个程序员，第二，你想成为更好的程序员。很好，我们需要更好的程序员。



### 程序员的价值谜题

为了赶工期，程序员可能会写一些烂代码，制造混乱，其实这样是无助于赶上工期的。

赶上工期的唯一办法就是-------始终保持代码的整洁。



### 整洁代码的艺术

编写整洁代码的程序员就像艺术家，他能用一系列变换把一张白板变为由优雅的代码构成的系统。



### 什么是代码整洁之道

这里是好多大佬的经典语录合集：

- 优雅，代码逻辑直截了当，减少代码依赖关系，便于维护（尤其微服务项目要注意，不要有耦合），性能调至最优，整洁的代码只做一件事。
- 要有单元测试和验收测试，命名要有意义，表达要清晰，只提供一种而非多种用途，少依赖，清晰少的API。
- 好的代码基本没有要修改的地方，该有的，作者都想到啦。

- 能通过所有的测试，没有重复代码（比较重要），提高表达力，代码中可以体现全部设计理念，包含尽可能少的实体（类，方法，函数（但是感觉有时候bean多一点好维护！））



### 童子军军规

光把代码写好还不够，还有让代码试试保持整洁。

让营地比你来时更干净。



### 小结（很重要，很升华）

艺术书并不能保证你读过以后就成为艺术家，他只能告诉你艺术家用过的工具，思维过程。

最后, **你还得练，孩子，你还得练。**



## 第二章 有意义的命名

### 见名知意

不要用单个字母表示，最好用有实际意义的单词表示。



### 避免误导

数字1和字母l容易混淆，数字0和字母O容易混淆，所以不要用字母l和O给命名。



### 做有意义的区分

比如theMesssage和Message其实意思一样

money和MoneyAmount意思一样



### 使用读的出来的名称

比如genymdhms(生成日期，年月日时分秒)   这样比较难理解，最好用单词比如generationTimetamp等。



### 使用可搜索的名称

比如数字7 和 MAX_CLASS_PER_STUDENT , 显然后面这个要比数字7好搜索许多。还有比如单独搜索一个字母，可能不好搜，如果搜一个稍微长一点的单词，就相对容易许多。



### 避免使用编码

类不要加前缀，比如m_desc ,没必要，这样很不舒服，麻烦，阅读者还要解码，要了解什么意思。（数据库表可能不算在内）

还有借口写成IShapeFactory(大写I代表接口)，现在一般不这么写，工作中接口都是ShapeFactoryMapper,或者是ShapeFactoryServices等吧。



### 避免思维映射

没看懂，好显说的是要明确，不要太抽象，其他人看了会想到别的意思。



### 类名 **

类名要尽量使用名词或者名词短语，比如Customer，Account，但是要避免使用Manager，Processer，Data，Info这样的类名（避免使用这几个，个人感觉是这几个意思不明确，这么写比如LibiaryManager 图书管理员 还是没有完全get到点 ），类名不应该是动词。



### 方法名

方法名应该是动词或者动词短语。比如postPayment，deletePage或者save。



### 别使用可爱的名字

别用俚语俗语等奇怪的名字。

别用eatMyShorts()表示 abort（）（前面这个表示去死吧 后面这个意思是中止，流产，夭折等）

比如别用whack（）表示kill（）（whack表示砍柴）



### 每一个概念对应一个词

其实项目中就是这么用的 比如controller  叫......Controller, 

有的地方叫.......Api



### 别用双关语

比如add，好多地方把插入也叫add，其实应该叫insert，这样可以避免双关语。

写代码，我们要的是那种大众化的作者尽量写清楚的平装书模式，而不需要那种学者挖地三尺才能搞清楚的学院派模式。



对于英语一般的我来说，这个有没有无所谓，反正不会发生在我身上。



### 使用解决方案命名

其实这里和设计模式有关联，比如StringBuider用建造者模式，AccountVisitor用访问者模式等。



### 添加有意义的语境

P26  将实现内容提取出来一个新方法，和if-else一起使用。好用简单。好理解。



### 不要添加没有意义的语境

比如现在这个类就是GSD系统

写GSDAccountAddress

和GSDAccountAddressMail   

前面一大推多余啦。



其实结合实际开发经验，有时候会有这种写法。

如果利用包将功能都分开的话，就没必要这么写啦，这样太长啦。



### 最后的话

取好名字最难得地方就是在于需要良好的描述技巧和共有的文化背景。



## 第三章 函数

### 如何写好函数

函数应该尽可能的短小。函数要短小精干。

**if语句，else语句，while语句等其中代码块应该只有一句**（这个，有待考量啊），**该行大概应该是一个函数调用的语句**。这样的好处就是，代码块的函数有较好的说明性的名称，可以增加文档上的价值。

函数的缩进，层次不该少于一层或者两层。



### 只做一件事

一个函数应该只做一件事，做好这件事。判断一个函数是否不止做了一件事，还有一个方法就是看这个函数能否可以再拆成一个函数。



### 每个函数一个抽象层级

其实就是下面这个意思，内部调用的方法，感觉应该写成private，子方法要写在调用他的方法的下面。

```java
public void function1(){
	test1();
	test2();
}

private void test1(){
}

private void test2(){
}

public function2(){
	test3();
	test4();
}

private void test1(){
}

private void test2(){
}
```



if else太多怎么办？ 看看 

https://www.cnblogs.com/eric-shao/p/10115577.html



### switch语句  **

没有看懂，说是为了让函数变小，结果用工厂模式，好像也没变小。？？？



### 使用描述性的名称

“如果每个例程都能让你感到深合己意，那就是代码整洁”



别害怕长名字，长而有描述性的名称，要比短而令人费解的名称好。

长而有描述性的名称，要比描述性的长注释好。



### 函数参数 

最理想的参数数量是0，其次是1，再次是2，尽量避免3个参数。



#### 一元函数的普遍形式

感觉书上的意思是最好有返回值。有些函数没有返回值，比如事件，要小心使用这种形式。



#### 标识参数

标识参数丑陋不堪。

就是说让Boolean值作为函数参数，很明显的说这个函数做的不止一件事，当参数为true的时候，做这么一件事，当参数为false的时候，做那么一件事。



#### 二元函数

二元函数不算恶劣，不过编写二元函数的时候要付出一些代价，应该尽可能的通过一些机制，将二元函数，转换为一元函数。

```
比如writeField（outputStream，name）
```

可以写成：

```
outputStream.writeField(name) (就是将writeField作为outputStream的成员之一)
```

**或者可以将outputStream作为当前类的成员变量，而无需再传递它。**



#### 三元函数

注意参数顺序和位置吧。容易出错。



#### 参数对象

当函数看来需要两个，三个或者三个以上的参数，就说明其中一个参数应该封装成类啦。

比如：

```java
Circle makeCircle(double x,double y,double radius);

Circle makeCircle(Point center,double radius);
```

下面这一种明显要优雅许多。

 



## 第四章 注释









## 第五章 格式



















## 第六章 对象和数据结构

















## 第七章 错误处理























## 第八章 边界





















## 第九章 单元测试























## 第十章 类























## 第十一章 系统





















## 第十二章 迭代 























## 第十三章 并发编程























## 第十四章 逐步改进





















## 第十五章 JUnit内幕























## 第十六章 重构SerialDate





















## 第十七章 味道与启发





